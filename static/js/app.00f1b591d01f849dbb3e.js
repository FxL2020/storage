webpackJsonp([1],{"3X5m":function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTQyMjcxOTU5ODkwIiBjbGFzcz0iaWNvbiIgc3R5bGU9IiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjE2NDEiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNNTEyIDg5My45NTJMMTA3LjUyIDU3Mi40MTZWMzM3LjkybDE2NC44NjQtMjA3Ljg3MmgxODQuMzJsNTQuMjcyIDMwLjcyIDU0LjI3Mi0zMC43MmgxODQuMzJMOTE2LjQ4IDMzNy45MnYyMzQuNDk2TDUxMiA4OTMuOTUyek0xODkuNDQgNTMyLjQ4TDUxMiA3ODkuNTA0IDgzNC41NiA1MzIuNDhWMzY2LjU5MmwtMTIyLjg4LTE1NC42MjRINTg3Ljc3Nkw1MTIgMjU0Ljk3NmwtNzUuNzc2LTQzLjAwOEgzMTIuMzJsLTEyMi44OCAxNTQuNjI0VjUzMi40OHoiIGZpbGw9IiM0MzdERkYiIHAtaWQ9IjE2NDIiPjwvcGF0aD48cGF0aCBkPSJNNTEyIDUwMi43ODRsLTE2My44NC05Ni4yNTYgMzAuNzItNTIuMjI0IDEzMy4xMiA3Ni44IDEyOS4wMjQtNzYuOCAzMS43NDQgNTIuMjI0eiIgZmlsbD0iIzYzRjdERSIgcC1pZD0iMTY0MyI+PC9wYXRoPjwvc3ZnPg=="},JzpI:function(e,t){},NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("7+uW"),a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var o=i("VU/8")({name:"App"},a,!1,function(e){i("gsu9")},null,null).exports,s=i("/ocq"),c=i("Zrlr"),l=i.n(c),r=i("wxAW"),u=i.n(r),M=function(){function e(t,i,n){l()(this,e),this.database=t,this.version=i,this.db=null,this.store=n}return u()(e,[{key:"callback",value:function(){console.log(this.database+", "+this.version)}},{key:"open",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){throw new Error(e)},n=void 0;window.indexedDB&&((n=window.indexedDB.open(this.database,this.version)).onerrror=function(e){i(e)},n.onsuccess=function(i){var a;t.db=n.result,console.log("get db"),t.db&&!t.db.objectStoreNames.contains(e.name)&&(a=t.db.createObjectStore(e.name,e.options),e.indexs.map(function(e){a.createIndex(e.name,e.prop,e.option)}),console.log("success"))},n.onupgradeneeded=function(e){var i;t.db=e.target.result,console.log("upgrade"),t.db&&!t.db.objectStoreNames.contains("person")&&((i=t.db.createObjectStore("person",{keyPath:"id"})).createIndex("name","name",{unique:!1}),i.createIndex("email","email",{unique:!0}))})}},{key:"addAll",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){throw new Error(e)};if(this.db){var n=this.db.transaction([t],"readwrite").objectStore(t);e.map(function(e){var t=n.put(e);t.onsuccess=function(e){console.log("add success")},t.onerror=function(e){i(e.target.error)}})}}},{key:"add",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){throw e};if(console.log(this.db),this.db){var n=this.db.transaction([t],"readwrite").objectStore(t).put(e);n.onsuccess=function(e){console.log("add success")},n.onerror=function(e){i(e.target.error)}}}},{key:"read",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){throw new Error(e)};if(this.db){var n,a=this.db.transaction([t]).objectStore(t).get(e);return a.onerror=function(e){i("读取异常")},a.onsuccess=function(e){a.result?n=a.result:i("没有数据")},n}}},{key:"readAll",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=[];return this.db.transaction(e).objectStore(e).openCursor().onsuccess=function(e){var i=e.target.result;i?(t.push({name:i.value.name,email:i.value.email}),i.continue()):console.log("没有更多数据了")},t}},{key:"remove",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){throw new Error(e)},n=this.db.transaction([t],"readwrite").objectStore(t).delete(e);n.onsuccess=function(e){console.log("remove success")},n.onerror=function(e){i("删除失败")}}},{key:"removeAll",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=this.db.transaction(["person"],"readwrite").objectStore("person").clear();e.onsuccess=function(e){console.log("clear success")},e.onerror=function(e){push(e.target.error)}}},{key:"update",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){throw new Error(e)},n=this.db.transaction([t],"readwrite").objectStore(t).put(e);n.onsuccess=function(e){console.log("update success")},n.onerror=function(e){i(e)}}}]),e}(),d={name:"HelloWorld",data:function(){return{search:"",modify_index:null,modify:"",loading:!0,input:"",modifyDialogVisible:!1,title:"AddressBook With IndexedDB",db_person:null,tableData:[{name:"暂无",email:"数据初始化中"}],store:[{id:0,name:"张三",email:"example1@gmail.com"},{id:1,name:"李四",email:"example2@gmail.com"}],tables:[{name:"person",options:{autoIncrement:!0,keyPath:"id"},indexs:[{name:"name",prop:"name",option:{unique:!1}},{name:"email",prop:"email",option:{unique:!0}}]}]}},created:function(){var e=this;this.db_person=new M("db_test",1,this.store),this.db_person.callback(),this.db_person.open(this.tables[0]),setTimeout(function(){e.table=e.db_person.addAll(e.store,e.tables[0].name)},1e3),setTimeout(function(){e.tableData=e.db_person.readAll(e.tables[0].name),e.$message.success("本地数据加载成功"),e.loading=!1},2e3)},methods:{searchOne:function(){var e=this;this.loading=!0,this.tableData=this.db_person.readAll(this.tables[0].name),setTimeout(function(){e.tableData=e.tableData.filter(function(t){if(t.name==e.search||""==e.search)return t}),e.loading=!1},2e3)},addOne:function(){var e;e=this.input.split(" ");try{this.db_person.add({id:this.tableData.length,name:e[0],email:e[1]},this.tables[0].name),this.tableData.push({name:e[0],email:e[1]});var t=this.tableData.length;console.log(t),this.tableData=_.uniqBy(this.tableData,"email");var i=this.tableData.length;console.log(i),this.input="",t==i?this.$message.success("增加成功"):this.$message.error("增加失败， 邮件不能重复输入")}catch(e){this.$message.error("增加失败")}},handleEdit:function(e){this.modifyDialogVisible=!0,this.modify_index=e},doModify:function(e){var t;t=this.modify.split(" "),this.tableData[this.modify_index].name=t[0],this.tableData[this.modify_index].email=t[1],this.db_person.update({id:this.modify_index,name:t[0],email:t[1]},e),this.$message.success("更新数据成功"),this.modifyDialogVisible=!1},handleDelete:function(e,t){this.db_person.remove(e,t),this.tableData.splice(e,1),this.$message.success("删除成功")},removeAll:function(){var e=this;this.$confirm("此操作将永久删除所有联系人, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.db_person.removeAll(),e.tableData=[],e.$message({type:"success",message:"删除成功!"})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}},mounted:function(){}},N={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hello"},[n("div",{staticClass:"header"},[n("img",{staticClass:"logo",attrs:{src:i("s02t")}}),e._v(" "),n("span",[e._v(e._s(e.title))])]),e._v(" "),n("div",{staticClass:"input"},[n("el-input",{attrs:{"suffix-icon":"el-icon-plus",placeholder:"请输入添加内容"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.addOne(t):null}},model:{value:e.input,callback:function(t){e.input="string"==typeof t?t.trim():t},expression:"input"}})],1),e._v(" "),n("div",{staticClass:"input"},[n("el-input",{attrs:{"suffix-icon":"el-icon-search",placeholder:"请输入搜索姓名"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchOne(t):null}},model:{value:e.search,callback:function(t){e.search="string"==typeof t?t.trim():t},expression:"search"}})],1),e._v(" "),n("div",{staticClass:"clear"},[e.loading?e._e():n("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:e.removeAll}},[e._v("一键清除所有联系人")])],1),e._v(" "),n("div",{staticClass:"list"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[n("el-table-column",{attrs:{prop:"name",label:"姓名",width:"75"}}),e._v(" "),n("el-table-column",{attrs:{prop:"email",label:"邮件",width:"200"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini"},on:{click:function(i){e.handleEdit(t.$index,t.row)}}},[n("img",{staticClass:"edit",attrs:{src:i("3X5m")}})]),e._v(" "),n("el-button",{attrs:{size:"mini"},on:{click:function(i){e.handleDelete(t.$index,e.tables[0].name)}}},[n("img",{staticClass:"edit",attrs:{src:i("aLNz")}})])]}}])})],1),e._v(" "),n("el-dialog",{attrs:{title:"提示",visible:e.modifyDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.modifyDialogVisible=t}}},[n("el-input",{attrs:{"suffix-icon":"el-icon-plus",placeholder:"请输入修改内容"},model:{value:e.modify,callback:function(t){e.modify="string"==typeof t?t.trim():t},expression:"modify"}}),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.modifyDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.doModify(e.tables[0].name)}}},[e._v("确 定")])],1)],1)],1),e._v(" "),e._m(0)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"footer"},[t("span",[t("i",{staticClass:"el-icon-loading",staticStyle:{"margin-right":"5px"}}),this._v("indexedDB AddressBook by ilv")])])}]};var I=i("VU/8")(d,N,!1,function(e){i("JzpI")},"data-v-0a777928",null).exports;n.default.use(s.a);var j=new s.a({routes:[{path:"/",name:"HelloWorld",component:I}]}),g=i("zL8q"),m=i.n(g);i("tvR6"),i("M4fF");n.default.use(m.a),n.default.config.productionTip=!1,new n.default({el:"#app",router:j,components:{App:o},template:"<App/>"})},aLNz:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTQyMjcwOTgyMjM3IiBjbGFzcz0iaWNvbiIgc3R5bGU9IiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjEyODkiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNNjkzLjI0OCAyNjEuMTJWMTU2LjY3MmwtNDAuOTYtNDAuOTZIMzcxLjcxMmwtNDAuOTYgNDAuOTZ2MTA0LjQ0OGgtMTYzLjg0djgxLjkyaDIwNC44bDQwLjk2LTQwLjk2VjE5Ny42MzJoMTk4LjY1NnYxMDQuNDQ4bDQwLjk2IDQwLjk2aDIwNC44di04MS45MnpNNzcxLjA3MiA5MDguMjg4SDI1Mi45MjhsLTQwLjk2LTQwLjk2VjQzMy4xNTJoODEuOTJ2MzkzLjIxNmg0MzYuMjI0di0zNTguNGgtOTEuMTM2VjYyNC42NGgtODEuOTJWNDI3LjAwOGw0MC45Ni00MC45NmgxNzMuMDU2bDQwLjk2IDQwLjk2djQ0MC4zMnoiIGZpbGw9IiM0MzdERkYiIHAtaWQ9IjEyOTAiPjwvcGF0aD48cGF0aCBkPSJNMzk4LjMzNiAzODUuMDI0aDYxLjQ0djMxNy40NGgtNjEuNDR6IiBmaWxsPSIjNjNGN0RFIiBwLWlkPSIxMjkxIj48L3BhdGg+PC9zdmc+"},gsu9:function(e,t){},s02t:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTQyMjcwMDk0MjU2IiBjbGFzcz0iaWNvbiIgc3R5bGU9IiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjExNzEiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNNzA4LjYwOCA5NzguOTQ0SDQ5OC42ODhsLTMyLjc2OC0xNy40MDgtMzk5LjM2LTU1NS4wMDgtNy4xNjgtMzAuNzJMOTQuMjA4IDE2My44NGwxOC40MzItMjcuNjQ4IDEzOC4yNC05MS4xMzYgNTYuMzIgMTAuMjQgMTUzLjYgMjE4LjExMi0xMC4yNCA1Ny4zNDQtNjMuNDg4IDQ1LjA1NiAyMTYuMDY0IDI5My44ODggNzQuNzUyLTQwLjk2IDUzLjI0OCAxMi4yODhMODM5LjY4IDc5Ny42OTZsLTIuMDQ4IDUwLjE3Ni05OC4zMDQgMTE2LjczNi0zMC43MiAxNC4zMzZ6IG0tMTg4LjQxNi04MS45MmgxNjkuOTg0bDY1LjUzNi03Ny44MjQtNzAuNjU2LTEwMC4zNTItNzMuNzI4IDM4LjkxMi01Mi4yMjQtMTEuMjY0LTI2My4xNjgtMzU2LjM1MiA5LjIxNi01Ny4zNDQgNjQuNTEyLTQ1LjA1Ni0xMDcuNTItMTUyLjU3Ni05MC4xMTIgNTkuMzkyTDE0My4zNiAzNzIuNzM2bDM3Ni44MzIgNTI0LjI4OHoiIGZpbGw9IiM0MzdERkYiIHAtaWQ9IjExNzIiPjwvcGF0aD48cGF0aCBkPSJNNzc5LjI2NCA1MzUuNTUybC0zNi44NjQtNDkuMTUyYzI0LjU3Ni0xOC40MzIgNDAuOTYtNDUuMDU2IDQ2LjA4LTc1Ljc3NnMtMy4wNzItNjEuNDQtMjEuNTA0LTg2LjAxNmMtMTguNDMyLTI0LjU3Ni00NS4wNTYtNDAuOTYtNzUuNzc2LTQ2LjA4cy02MS40NCAzLjA3Mi04Ni4wMTYgMjEuNTA0bC0zNi44NjQtNDkuMTUyYzM3Ljg4OC0yNy42NDggODQuOTkyLTM5LjkzNiAxMzIuMDk2LTMyLjc2OCA0Ny4xMDQgNi4xNDQgODguMDY0IDMwLjcyIDExNi43MzYgNjguNjA4czM5LjkzNiA4NC45OTIgMzIuNzY4IDEzMi4wOTZjLTguMTkyIDQ3LjEwNC0zMi43NjggODguMDY0LTcwLjY1NiAxMTYuNzM2eiIgZmlsbD0iIzYzRjdERSIgcC1pZD0iMTE3MyI+PC9wYXRoPjxwYXRoIGQ9Ik04NDUuODI0IDYyNi42ODhMODA4Ljk2IDU3Ny41MzZDOTExLjM2IDUwMS43NiA5MzMuODg4IDM1OC40IDg1OC4xMTIgMjU2Yy03NC43NTItMTAyLjQtMjE5LjEzNi0xMjMuOTA0LTMyMC41MTItNDkuMTUyTDUwMS43NiAxNTcuNjk2YzEyOS4wMjQtOTUuMjMyIDMxMS4yOTYtNjcuNTg0IDQwNi41MjggNjIuNDY0IDk1LjIzMiAxMjkuMDI0IDY2LjU2IDMxMS4yOTYtNjIuNDY0IDQwNi41Mjh6IiBmaWxsPSIjNjNGN0RFIiBwLWlkPSIxMTc0Ij48L3BhdGg+PC9zdmc+"},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.00f1b591d01f849dbb3e.js.map